name: Test Dependencies

on:
  workflow_dispatch:  # Chá»‰ cháº¡y thá»§ cÃ´ng

jobs:
  test-deps:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: Install system dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential libssl-dev libffi-dev python3-dev
        
    - name: Install Python dependencies
      run: |
        python -m pip install --upgrade pip setuptools wheel
        pip install -r requirements.txt
        
    - name: Test imports
      run: |
        python -c "
        print('Testing imports...')
        
        # Test basic imports
        import ccxt
        print('âœ… ccxt imported')
        
        import numpy as np
        print('âœ… numpy imported')
        
        import pandas as pd
        print('âœ… pandas imported')
        
        import requests
        print('âœ… requests imported')
        
        from dotenv import load_dotenv
        print('âœ… python-dotenv imported')
        
        import yfinance as yf
        print('âœ… yfinance imported')
        
        from tradingview_ta import TA_Handler
        print('âœ… tradingview-ta imported')
        
        import ta
        print('âœ… ta imported')
        
        # Test ML imports
        from sklearn.ensemble import RandomForestClassifier
        print('âœ… scikit-learn imported')
        
        import xgboost as xgb
        print('âœ… xgboost imported')
        
        import lightgbm as lgb
        print('âœ… lightgbm imported')
        
        import joblib
        print('âœ… joblib imported')
        
        print('ðŸŽ‰ All dependencies imported successfully!')
        "
        
    - name: Test script import
      run: |
        python -c "
        print('Testing script.py imports...')
        exec(open('script.py').read())
        print('âœ… script.py can be imported successfully!')
        "
